
#define ONE(var1, var2) \
            (var1-var2)

void main(void) {

  uint8 color = 0;
  uint8 i;

  while (1) {
    __z80_out[0xBF] = 0x00;
    __z80_out[0xBF] = 0xC0;
    for (i = 0; i < 32; i++) {
      __z80_out[0xBE] = color;
    }

    add_1(&color);
  }
}

void add_1(uint8 *color) {

  int8 var = color[0];
  var = (var--) + 1;

  color[2-1-1] += (ONE(2,-1)+2-1-1);
}
