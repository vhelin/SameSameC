
  .SECTION "main" FREE
    ; =================================================================
    ; ../test2.blb:3: void main() {
    ; =================================================================
    main:
      ; A  - tmp
      ; BC - tmp
      ; DE - frame pointer
      ; HL - tmp
      ; SP - stack pointer
      ; IX - tmp
      ; IY - tmp
      ; =================================================================
      ; ../test2.blb:5: uint8 color = 0;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: variable "color" size 1 offset -4 type n
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: color.uint8 (uint8) := 0.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  (IX+0),0
      ; =================================================================
      ; ../test2.blb:7: while (1) {
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: _label_1:
      ; -----------------------------------------------------------------
    _label_1:
      ; =================================================================
      ; ../test2.blb:8: __z80_out[0xBF] = 0x00;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: __z80_out.uint8 (uint8)[191.uint8 (uint8)] := 0.uint8 (uint8)
      ; -----------------------------------------------------------------
      LD  A,0
      OUT ($BF),A
      ; =================================================================
      ; ../test2.blb:9: __z80_out[0xBF] = 0xC0;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: __z80_out.uint8 (uint8)[191.uint8 (uint8)] := 192.uint8 (uint8)
      ; -----------------------------------------------------------------
      LD  A,192
      OUT ($BF),A
      ; =================================================================
      ; ../test2.blb:11: __z80_out[0xBE] = color;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: __z80_out.uint8 (uint8)[190.uint8 (uint8)] := color.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  A,(IX+0)
      OUT ($BE),A
      ; =================================================================
      ; ../test2.blb:14: }
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: color.uint8 (uint8) := color.uint8 (uint8) + 1.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  A,(IX+0)
      ADD A,1
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  (IX+0),A
      ; -----------------------------------------------------------------
      ; TAC: jmp _label_1
      ; -----------------------------------------------------------------
      JP  _label_1
  .ENDS

