  .SECTION "main" FREE
    ; =================================================================
    ; test2.blb:5: void main() {
    ; =================================================================
    main:
      ; A  - tmp
      ; BC - tmp
      ; DE - frame pointer
      ; HL - tmp
      ; SP - stack pointer
      ; IX - tmp
      ; IY - tmp
      ; =================================================================
      ; test2.blb:7: int8 var = 1 + g_value + 2 + 3;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: variable "var" size 1 offset -4 type n
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: r0.int16 (int16) := 1.uint8 (int16) + g_value.int16 (int16)
      ; -----------------------------------------------------------------
      LD  HL,1
      LD  IX,g_value
      LD  C,(IX+0)
      LD  B,(IX+1)
      ADD HL,BC
      ; offset -5
      LD  IX,-5
      ADD IX,DE
      LD  (IX+0),L
      LD  (IX-1),H
      ; -----------------------------------------------------------------
      ; TAC: r1.int16 (int16) := r0.int16 (int16) + 2.uint8 (int16)
      ; -----------------------------------------------------------------
      ; offset -5
      LD  IX,-5
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      LD  BC,2
      ADD HL,BC
      ; offset -7
      LD  IX,-7
      ADD IX,DE
      LD  (IX+0),L
      LD  (IX-1),H
      ; -----------------------------------------------------------------
      ; TAC: var.int8 (int8) := r1.int16 (int16) + 3.uint8 (int16)
      ; -----------------------------------------------------------------
      ; offset -7
      LD  IX,-7
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      LD  BC,3
      ADD HL,BC
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  (IX+0),L
      ; =================================================================
      ; test2.blb:8: sum(1, 2);
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: r2.uint8 (uint8) := 1.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -9
      LD  IX,-9
      ADD IX,DE
      LD  (IX+0),1
      ; -----------------------------------------------------------------
      ; TAC: r3.uint8 (uint8) := 2.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -10
      LD  IX,-10
      ADD IX,DE
      LD  (IX+0),2
      ; -----------------------------------------------------------------
      ; TAC: sum(r2.uint8 (uint8), r3.uint8 (uint8))
      ; -----------------------------------------------------------------
      LD  B,D
      LD  C,E
      LD  HL,0
      ADD HL,SP
      LD  D,H
      LD  E,L
      LD  IX,0
      ADD IX,DE
      LD  HL,_return_1
      LD  (IX+0),L
      LD  (IX-1),H
      LD  (IX-2),C
      LD  (IX-3),B
      LD  IY,0
      ADD IY,BC
      LD  L,(IY-9)
      LD  (IX-4),L
      LD  L,(IY-10)
      LD  (IX-5),L
      LD  IX,-8
      ADD IX,DE
      LD  SP,IX
      JP  sum
    _return_1:
      LD  H,D
      LD  L,E
      LD  SP,HL
      LD  IX,0
      ADD IX,DE
      LD  E,(IX-2)
      LD  D,(IX-3)
      ; -----------------------------------------------------------------
      ; TAC: return
      ; -----------------------------------------------------------------
      LD  IX,0
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      JP  (HL)
  .ENDS

  .SECTION "sum" FREE
    ; =================================================================
    ; test2.blb:11: void sum(int8 a, int8 b) {
    ; =================================================================
    sum:
      ; A  - tmp
      ; BC - tmp
      ; DE - frame pointer
      ; HL - tmp
      ; SP - stack pointer
      ; IX - tmp
      ; IY - tmp
      ; -----------------------------------------------------------------
      ; TAC: variable "a" size 1 offset -4 type a
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: variable "b" size 1 offset -5 type a
      ; -----------------------------------------------------------------
      ; =================================================================
      ; test2.blb:13: int16 c = 1;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: variable "c" size 2 offset -6 type n
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: c.int16 (int16) := 1.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -6
      LD  IX,-6
      ADD IX,DE
      LD  (IX+0),1
      LD  (IX-1),0
      ; =================================================================
      ; test2.blb:15: return;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: return
      ; -----------------------------------------------------------------
      LD  IX,0
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      JP  (HL)
  .ENDS

