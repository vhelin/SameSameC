  .SECTION "main" FREE
    ; =================================================================
    ; test2.blb:5: void main() {
    ; =================================================================
    main:
      ; A  - tmp
      ; BC - tmp
      ; DE - frame pointer
      ; HL - tmp
      ; SP - stack pointer
      ; IX - tmp
      ; IY - tmp
      ; =================================================================
      ; test2.blb:7: sum(1, 2);
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: r0.uint8 (uint8) := 1.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -4
      LD  IX,-4
      ADD IX,DE
      LD  (IX+0),1
      ; -----------------------------------------------------------------
      ; TAC: r1.uint8 (uint8) := 2.uint8 (uint8)
      ; -----------------------------------------------------------------
      ; offset -5
      LD  IX,-5
      ADD IX,DE
      LD  (IX+0),2
      ; -----------------------------------------------------------------
      ; TAC: sum(r0.uint8 (uint8), r1.uint8 (uint8))
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: return
      ; -----------------------------------------------------------------
      LD  IX,0
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      LD  E,(IX-2)
      LD  D,(IX-3)
      JP  (HL)
  .ENDS
  .SECTION "sum" FREE
    ; =================================================================
    ; test2.blb:10: int8 sum(int8 a, int8 b) {
    ; =================================================================
    sum:
      ; A  - tmp
      ; BC - tmp
      ; DE - frame pointer
      ; HL - tmp
      ; SP - stack pointer
      ; IX - tmp
      ; IY - tmp
      ; -----------------------------------------------------------------
      ; TAC: variable "a" size 1 offset -5 type a
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: variable "b" size 1 offset -6 type a
      ; -----------------------------------------------------------------
      ; =================================================================
      ; test2.blb:12: int8 result = a + b;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: variable "result" size 1 offset -7 type n
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: result.int8 (int8) := a.int8 (int8) + b.int8 (int8)
      ; -----------------------------------------------------------------
      ; offset -5
      LD  IX,-5
      ADD IX,DE
      LD  A,(IX+0)
      ; offset -6
      LD  IX,-6
      ADD IX,DE
      ADD A,(IX+0)
      ; offset -7
      LD  IX,-7
      ADD IX,DE
      LD  (IX+0),A
      ; =================================================================
      ; test2.blb:13: int8 final = result;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: variable "final" size 1 offset -8 type n
      ; -----------------------------------------------------------------
      ; -----------------------------------------------------------------
      ; TAC: final.int8 (int8) := result.int8 (int8)
      ; -----------------------------------------------------------------
      ; offset -8
      LD  IX,-8
      ADD IX,DE
      ; offset -7
      LD  IY,-7
      ADD IY,DE
      LD  A,(IY+0)
      LD  (IX+0),A
      ; =================================================================
      ; test2.blb:15: return final;
      ; =================================================================
      ; -----------------------------------------------------------------
      ; TAC: return final.int8 (int8)
      ; -----------------------------------------------------------------
      ; offset -8
      LD  IX,-8
      ADD IX,DE
      LD  L,(IX+0)
      LD  IX,-2
      ADD IX,DE
      LD  (IX+0),L
      LD  IX,0
      ADD IX,DE
      LD  L,(IX+0)
      LD  H,(IX-1)
      LD  E,(IX-2)
      LD  D,(IX-3)
      JP  (HL)
  .ENDS
